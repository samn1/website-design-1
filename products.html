<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All Products</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/page-transitions.css">
    <link rel="stylesheet" href="css/products.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
  </head>
  <body class="page-transition">
    <!-- Navbar -->
    <nav class="navbar">
      <div class="navbar-logo"></div>
      <div class="navbar-links" id="navbarLinks">
        <a href="index.html">Home</a>
        <a href="product-upload.html">Manage Products</a>
        <a href="#footer">Contact</a>
      </div>
      <button class="navbar-toggle" id="navbarToggle" aria-label="Toggle navigation">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </button>
    </nav>

    <main>
      <div class="products-header animate">
        <h1 class="products-title">All Products</h1>
      </div>
      <div id="productCarouselsContainer"></div>
    </main>

    <!-- Footer Section -->
    <footer id="footer">
      <section>
        <div class="contact-section">
          <div class="container">
            <h2>Get in Touch</h2>
            <p>We'd love to hear from you. Please use the contact information below</p>
            <div></div>
            <h3>Address</h3>
            <p>1234 Satellite Drive, Space City, SC 90210</p>
            <h3>Email</h3>
            <p>contact@satellitecompany.com</p>
            <h3>Telephone</h3>
            <p>+1 (555) 123-4567</p>
            <h3>Fax</h3>
            <p>+1 (555) 987-6543</p>
            <h3>Hours</h3>
            <p>Monday - Friday: 9am - 5pm</p>
            <h3>Connect With Us</h3>
            <p>We'd love to hear from you. Please use the contact information below</p>
            <!-- Socials: Only icons, no text -->
            <div class="footer-socials">
              <div class="social-icons">
                <a href="#" aria-label="Facebook" class="social-icon">
                  <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path fill="#222" d="M22.675 0h-21.35C.595 0 0 .592 0 1.326v21.348C0 23.408.595 24 1.325 24h11.495v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.797.143v3.24l-1.918.001c-1.504 0-1.797.715-1.797 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116C23.406 24 24 23.408 24 22.674V1.326C24 .592 23.406 0 22.675 0"></path></svg>
                </a>
                <a href="#" aria-label="Twitter" class="social-icon">
                  <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path fill="#222" d="M24 4.557a9.83 9.83 0 0 1-2.828.775A4.932 4.932 0 0 0 23.337 3.1a9.864 9.864 0 0 1-3.127 1.195A4.916 4.916 0 0 0 16.616 2c-2.73 0-4.942 2.21-4.942 4.936 0 .386.045.763.127 1.124C7.728 7.89 4.1 5.924 1.671 2.905a4.822 4.822 0 0 0-.666 2.482c0 1.71.87 3.213 2.188 4.096A4.904 4.904 0 0 1 .964 8.1v.062c0 2.385 1.693 4.374 3.946 4.827a4.996 4.996 0 0 1-2.212.084c.623 1.942 2.432 3.355 4.576 3.395A9.867 9.867 0 0 1 0 21.543a13.94 13.94 0 0 0 7.548 2.209c9.057 0 14.009-7.496 14.009-13.986 0-.21-.005-.423-.015-.633A9.936 9.936 0 0 0 24 4.557z"></path></svg>
                </a>
                <a href="#" aria-label="LinkedIn" class="social-icon">
                  <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path fill="#222" d="M22.23 0H1.77C.792 0 0 .771 0 1.723v20.554C0 23.229.792 24 1.77 24h20.46C23.208 24 24 23.229 24 22.277V1.723C24 .771 23.208 0 22.23 0zM7.12 20.452H3.56V9h3.56v11.452zM5.34 7.633a2.07 2.07 0 1 1 0-4.14 2.07 2.07 0 0 1 0 4.14zM20.452 20.452h-3.56v-5.605c0-1.336-.025-3.057-1.865-3.057-1.867 0-2.153 1.454-2.153 2.957v5.705h-3.56V9h3.418v1.561h.049c.476-.899 1.637-1.847 3.37-1.847 3.602 0 4.267 2.37 4.267 5.455v6.283z"></path></svg>
                </a>
                <a href="#" aria-label="Instagram" class="social-icon">
                  <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <rect width="24" height="24" rx="6" fill="#222"/>
                    <path d="M12 7.2A4.8 4.8 0 1 0 12 16.8A4.8 4.8 0 1 0 12 7.2Z" fill="#fff"/>
                    <circle cx="18.2" cy="5.8" r="1.2" fill="#fff"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </footer>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Load Products and Render Carousels
        async function loadProducts() {
          try {
            const response = await fetch('/api/products');
            const data = await response.json();
            // Only show products with Status = true
            const products = (data.products || []).filter(p => {
              const status = String(p.Status).toLowerCase();
              return status === 'true' || status === 'active' || status === '1';
            });
            // Group products by Product Line, preserving order
            const productLinesMap = {};
            products.forEach(product => {
              const line = product['Product Line'] || 'Uncategorized';
              if (!productLinesMap[line]) productLinesMap[line] = [];
              productLinesMap[line].push(product);
            });
            const productLines = Object.keys(productLinesMap);
            const container = document.getElementById('productCarouselsContainer');
            container.innerHTML = '';
            if (products.length === 0) {
              container.innerHTML = '<div style="text-align:center;padding:2rem;font-size:1.2rem;color:#888;">No products available. Please upload products using the Manage Products page.</div>';
              return;
            }
            productLines.forEach((line, idx) => {
              const lineProducts = productLinesMap[line];
              if (lineProducts.length === 0) return;
              // Create section
              const section = document.createElement('section');
              section.className = 'product-line-section';
              section.innerHTML = `
                <h2 style="font-size:2rem;font-weight:400;margin:2rem 0 1rem 0;">${line}</h2>
                <div id="splide-${idx}" class="splide product-carousel-container">
                  <div class="splide__track">
                    <ul class="splide__list">
                      ${lineProducts.map(product => {
                        let imageUrl = product['Product Image'] || product['ProductImage'] || product['Image'] || '';
                        if (!imageUrl) imageUrl = 'https://via.placeholder.com/150?text=No+Image';
                        return `
                        <li class="splide__slide">
                          <div class="product-card animate">
                            <div class="product-image" style="background-image:url('${imageUrl}');background-size:cover;background-position:center;"></div>
                            <div style="padding:0.5rem 0 0.2rem 0.5rem;font-size:0.9rem;color:#444;">Product ID: ${product['Product ID'] || 'N/A'}</div>
                            <div style="font-weight:bold;font-size:1.1rem;padding-left:0.5rem;">${product.Name || 'Unnamed Product'}</div>
                            <div style="padding:0.2rem 0.5rem 0.5rem 0.5rem;font-size:0.95rem;color:#444;">${product['Product Description'] || 'No description available.'}</div>
                            <button class="more-info-btn" style="margin-left:0.5rem;margin-top:auto;background:#eee;border:none;padding:0.4rem 1rem;border-radius:4px;color:#888;cursor:pointer;">More Information</button>
                          </div>
                        </li>
                        `;
                      }).join('')}
                    </ul>
                  </div>
                </div>
              `;
              container.appendChild(section);
            });
            // Initialize Splide for each carousel
            productLines.forEach((line, idx) => {
              const lineProducts = productLinesMap[line];
              if (lineProducts.length === 0) return;
              new Splide(`#splide-${idx}`, {
                type: 'loop',
                perPage: 4,
                perMove: 1,
                gap: '1rem',
                padding: { left: '2rem', right: '2rem' },
                breakpoints: {
                  1200: { perPage: 3 },
                  900: { perPage: 2 },
                  600: { perPage: 1 }
                }
              }).mount();
            });
          } catch (error) {
            console.error('Error loading products:', error);
          }
        }
        // Initial load
        loadProducts();
        // Animation functions
        function animateNavbarLinks() {
          var navLinks = document.querySelectorAll('.navbar-links a');
          navLinks.forEach(function(link) {
            link.classList.remove('animate');
          });
          void document.body.offsetWidth;
          navLinks.forEach(function(link) {
            link.classList.add('animate');
          });
        }
        animateNavbarLinks();
        window.addEventListener('pageshow', function(event) {
          if (event.persisted) animateNavbarLinks();
        });
        // Fade in main content
        document.querySelectorAll('.products-header').forEach(function(el, i) {
          setTimeout(function() {
            el.classList.add('animate');
          }, 100 + i * 100);
        });
        // Hamburger menu toggle for small screens only
        document.addEventListener('DOMContentLoaded', function() {
          var toggle = document.getElementById('navbarToggle');
          var links = document.getElementById('navbarLinks');
          toggle.addEventListener('click', function() {
            links.classList.toggle('active');
          });
        });
      });
    </script>
  </body>
</html> 